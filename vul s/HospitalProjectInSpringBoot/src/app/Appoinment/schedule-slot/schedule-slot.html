<div class="container my-4" style="font-family: 'Segoe UI', Tahoma, sans-serif;">
  <h2 class="mb-3" style="color:#1877f2;">Doctor Schedule Management</h2>


 <!-- üîç Filter Section (moved OUTSIDE the form) -->
  <!-- <div style="background:white; padding:15px; border-radius:12px; box-shadow:0 3px 10px rgba(0,0,0,0.1); margin-bottom:25px;">
    <div class="row g-3 align-items-end">
      <div class="col-md-5">
        <label style="font-weight:600;">Filter by Doctor</label>
        <select [(ngModel)]="selectedDoctorId" class="form-select" name="doctorFilter">
          <option [ngValue]="null">-- All Doctors --</option>
          <option *ngFor="let d of doctors" [value]="d.id">{{ d.name }}</option>
        </select>
      </div>

      <div class="col-md-4">
        <label style="font-weight:600;">Filter by Date</label>
        <input type="date" [(ngModel)]="selectedDate" class="form-control" name="dateFilter" />
      </div>

      <div class="col-md-3 text-end">
        <button (click)="filterSlots()" style="background:#007bff; color:white; padding:6px 16px; border:none; border-radius:6px;">
          <i class="bi bi-funnel"></i> Filter
        </button>
        <button (click)="loadSlots()" style="background:#6c757d; color:white; padding:6px 16px; border:none; border-radius:6px; margin-left:5px;">
          <i class="bi bi-arrow-clockwise"></i> Reset
        </button>
      </div>
    </div>
  </div> -->


  <form [formGroup]="slotForm" (ngSubmit)="onSubmit()" style="background:white; padding:20px; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.1); margin-bottom:30px;">
    <div class="row g-3">

       

      <div class="col-md-4">
        <label style="font-weight:600;">Doctor</label>
        <select formControlName="doctor" class="form-select">
          <option value="" disabled>Select Doctor</option>
          <option *ngFor="let d of doctors" [ngValue]="d">{{ d.name }}</option>
        </select>
      </div>

      <div class="col-md-4">
        <label style="font-weight:600;">Date</label>
        <input type="date" formControlName="date" class="form-control" />
      </div>

      <div class="col-md-2">
        <label style="font-weight:600;">Start Time</label>
        <input type="time" formControlName="startTime" class="form-control" />
      </div>

      <div class="col-md-2">
        <label style="font-weight:600;">End Time</label>
        <input type="time" formControlName="endTime" class="form-control" />
      </div>
    </div>

    <div class="mt-3">
      <button type="submit" style="background:#28a745; color:white; padding:6px 18px; border:none; border-radius:6px; transition:0.3s;"
             >
        {{ slotForm.value.id ? 'Update Slot' : 'Add Slot' }}
      </button>
      <button type="button" style="background:#6c757d; color:white; padding:6px 18px; border:none; border-radius:6px; margin-left:10px;"
              (click)="slotForm.reset({ isBooked:false, doctor:null })">
        Reset
      </button>
    </div>
  </form>

  <!--  Slots Card List -->
  <div class="row g-4">
    <div class="col-md-4" *ngFor="let slot of slots">
      <div style="background:white; border-radius:15px; padding:20px; box-shadow:0 4px 20px rgba(0,0,0,0.1); transition:transform 0.3s, box-shadow 0.3s;"
         >
      <h4 style="color:#17a2b8; margin-bottom:8px;">
  <i class="bi bi-person-circle"></i> {{ slot.doctorName || 'Unknown' }}
</h4>


       
        <p style="margin:0;">üìÖ <strong>Date:</strong> {{ slot.date | date:'shortDate' }}</p>
        <p style="margin:0;">‚è∞ <strong>Time:</strong> {{ slot.startTime }} - {{ slot.endTime }}</p>
        <p style="margin:0;">‚úÖ <strong>Status:</strong> {{ slot.booked ? 'Booked' : 'Available' }}</p>

        <div class="mt-2">
          <button (click)="editSlot(slot)" 
                  style="background:#007bff; color:white; padding:4px 12px; border:none; border-radius:6px; margin-right:5px;">
            <i class="bi bi-pencil-square"></i> Edit
          </button>
          <button (click)="deleteSlot(slot.id!)" 
                  style="background:#dc3545; color:white; padding:4px 12px; border:none; border-radius:6px;">
            <i class="bi bi-trash"></i> Delete
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
