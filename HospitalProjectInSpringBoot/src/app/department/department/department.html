<div class="container my-4" style="font-family: Arial, sans-serif;">

  <h2 class="mb-4" style="color:#1E40AF; font-weight:700;">Department CRUD</h2>

  <form [formGroup]="departmentForm" (ngSubmit)="onSubmit()" class="row g-3" style="margin-bottom: 30px;">
    <div class="col-md-6">
      <label for="name" class="form-label" style="font-weight:600; color:#1E40AF;">Department Name:</label>
      <input id="name" formControlName="departmentName" type="text" class="form-control"
        [class.is-invalid]="departmentForm.get('name')?.invalid && departmentForm.get('name')?.touched"
        style="border-radius: 8px; padding: 8px; border: 1px solid #94A3B8;" />
      <div class="invalid-feedback" *ngIf="departmentForm.get('name')?.invalid && departmentForm.get('name')?.touched"
        style="color: #DC2626; font-size: 0.85rem;">
        Department name is required.
      </div>
    </div>

    <div class="col-md-6">
      <label for="description" class="form-label" style="font-weight:600; color:#1E40AF;">Description:</label>
      <input id="description" formControlName="description" type="text" class="form-control"
        style="border-radius: 8px; padding: 8px; border: 1px solid #94A3B8;" />
    </div>

    <div class="col-12" style="margin-top: 10px;">
      <button type="submit" class="btn btn-primary me-2"
        [disabled]="departmentForm.invalid"
        style="background: linear-gradient(90deg, #2563EB, #3B82F6); border:none; padding: 10px 20px; border-radius: 10px; font-weight: 700; color: white; cursor: pointer; transition: transform 0.3s ease;">
        {{ isEditMode ? 'Update' : 'Add' }} Department
      </button>

      <button type="button" class="btn btn-secondary" *ngIf="isEditMode" (click)="resetForm()"
        style="background: #64748B; border:none; padding: 10px 20px; border-radius: 10px; color: white; cursor: pointer; font-weight: 600; margin-left: 10px;">
        Cancel Edit
      </button>
    </div>
  </form>

  <hr style="margin: 40px 0;" />

  <h3 style="color:#1E40AF; font-weight:700; margin-bottom: 20px;">Departments List</h3>

  <table class="table table-striped table-hover" style="width: 100%; border-collapse: collapse; font-size: 0.95rem;">
    <thead style="background: linear-gradient(90deg, #2563EB, #3B82F6); color: white;">
      <tr>
        <th style="padding: 12px; text-align: left;">Name</th>
        <th style="padding: 12px; text-align: left;">Description</th>
        <th style="padding: 12px; width: 150px;">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let dep of departments" style="border-bottom: 1px solid #CBD5E1;">
        <td style="padding: 12px;">{{ dep.departmentName }}</td>
        <td style="padding: 12px;">{{ dep.description }}</td>
        <td style="padding: 12px;">
          <button (click)="editDepartment(dep)" style="background:#3B82F6; border:none; padding: 6px 12px; border-radius: 6px; color:white; font-weight: 600; margin-right: 8px; cursor: pointer; transition: background 0.3s ease;">
            Edit
          </button>
          <button  (click)="deleteDepartment(dep.id!)" style="background:#DC2626; border:none; padding: 6px 12px; border-radius: 6px; color:white; font-weight: 600; cursor: pointer; transition: background 0.3s ease;">
            Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Cards View -->
  <div class="row mt-5" style="gap: 24px;">
    <h3 style="color:#1E40AF; font-weight:700; margin-bottom: 20px; width: 100%;">Departments Cards</h3>

    <div *ngFor="let dep of departments" 
         style="flex: 1 1 300px; background: #E0F2FE; border-left: 6px solid #2563EB; border-radius: 12px; padding: 20px; box-shadow: 0 8px 15px rgba(37, 99, 235, 0.2); cursor: pointer; transition: transform 0.3s ease, box-shadow 0.3s ease; display: flex; flex-direction: column;">

      <div style="display: flex; align-items: center; margin-bottom: 15px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="#2563EB" viewBox="0 0 16 16" 
          style="animation: heartbeat 1.5s infinite; flex-shrink: 0; margin-right: 14px;">
          <path fill-rule="evenodd" d="M1 8a7 7 0 1 1 14 0A7 7 0 0 1 1 8zm7-3c.567 0 1.234.59 1.515 1.196.16.36.536.411.758.059l.616-.88a.5.5 0 0 1 .738-.03l.768.817a.5.5 0 0 1-.001.695l-3.046 3.33a.5.5 0 0 1-.782-.08L6.5 8.1 5.4 10.77a.5.5 0 0 1-.858-.514l1.3-3.862A.5.5 0 0 1 6.5 6z"/>
        </svg>
        <h5 style="color:#2563EB; margin: 0; font-weight: 700;">{{ dep.departmentName }}</h5>
      </div>

      <p style="color:#475569; font-size: 0.9rem; flex-grow: 1; min-height: 60px;">{{ dep.description }}</p>

    </div>
  </div>

  <style>
    button:hover {
      opacity: 0.85;
    }
    [style*="cursor: pointer"]:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 25px rgba(37, 99, 235, 0.3);
    }
    @keyframes heartbeat {
      0%, 100% {
        transform: scale(1);
        fill: #2563EB;
      }
      50% {
        transform: scale(1.2);
        fill: #3B82F6;
      }
    }
  </style>

</div>

